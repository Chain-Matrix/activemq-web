<div class="wiki-content maincontent"><p>ActiveMQ will run under Kaffe with a few adjustments to the default configuration.</p>

<p>We have found the Kaffe does not properly implement:</p>
<ul><li>File based NIO</li><li>Multicast Sockets</li><li>JMX connector JNDI handling</li></ul>


<p>Therefore, the default ActiveMQ configuration must be adjusted to disable the Journal (uses NIO), disable Multicast discovery, and JMX.</p>


<p>The Kaffe and OS Version that was tested against was:</p>
<blockquote>
<p>kaffe version info: Engine: Interpreter   Version: 1.1.7   Java Version: 1.4<br clear="none">
OS &amp; version: Linux dev-10 2.6.13-15.8-smp #1 SMP Tue Feb 7 11:07:24 UTC</p></blockquote>

<p>The following is the activemq.xml that was used:</p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
&lt;beans&gt;
 &lt;bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"/&gt;

 &lt;broker useJmx="false" xmlns="http://activemq.org/config/1.0"&gt;

  &lt;persistenceAdapter&gt;
     &lt;journaledJDBC useJournal="false" dataDirectory="activemq-data"/&gt;
  &lt;/persistenceAdapter&gt;

  &lt;transportConnectors&gt;
     &lt;transportConnector name="default" uri="tcp://localhost:61616"/&gt;
     &lt;transportConnector name="stomp"   uri="stomp://localhost:61613"/&gt;
  &lt;/transportConnectors&gt;

 &lt;/broker&gt;

&lt;/beans&gt;
</pre>
</div></div></div>

