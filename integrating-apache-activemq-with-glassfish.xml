<div class="wiki-content maincontent"><h1>General</h1><p>See this article for a description of how to connect Glassfish 3 to an ActiveMQ 5 broker, and consume messages using a Message Driven Bean: <a shape="rect" class="external-link" href="http://geertschuring.wordpress.com/2012/04/20/how-to-connect-glassfish-3-to-activemq-5/" rel="nofollow">http://geertschuring.wordpress.com/2012/04/20/how-to-connect-glassfish-3-to-activemq-5/</a></p><h1>Glassfish 4.1</h1><p>&#160;</p><ol><li>Add resource adapter<br clear="none"><ol><li>Download the resource-adapter file suitable to your broker version:<br clear="none"><a shape="rect" href="http://repo1.maven.org/maven2/org/apache/activemq/activemq-rar/">http://repo1.maven.org/maven2/org/apache/activemq/activemq-rar/</a></li><li><p>Deploy the&#160; resource adapter with the name "activemq-rar"</p><structured-macro ac:macro-id="20855b14-bd0e-4956-afcd-f43690b8e104" ac:name="code" ac:schema-version="1"><parameter ac:name="language">bash</parameter><plain-text-body>bin/asadmin deploy --type rar --name activemq-rar /tmp/activemq-rar-5.11.1.rar</plain-text-body></structured-macro></li><li><p>Configure resource adapter <br clear="none">(Failover Setup)</p><structured-macro ac:macro-id="ef4b601a-2fdc-447c-83df-8fa0e0de1745" ac:name="code" ac:schema-version="1"><parameter ac:name="language">bash</parameter><plain-text-body>bin/asadmin create-resource-adapter-config   \
  --property ServerUrl='failover\:(tcp\://broker-c1.foobar.local\:61616,tcp\://broker-c2.foobar.local\:61616,tcp\://broker-c3.foobar.local\:61616)?initialReconnectDelay\=2000&amp;jms.useCompression\=true':UserName='admin':Password='admin' activemq-rar</plain-text-body></structured-macro></li></ol></li><li><p>&#160;Create connector connection pool</p><structured-macro ac:macro-id="800ed343-3e5a-49cd-97a9-8ba10a1e12a8" ac:name="code" ac:schema-version="1"><parameter ac:name="language">bash</parameter><plain-text-body>bin/asadmin create-connector-connection-pool \
  --raname activemq-rar \
  --connectiondefinition javax.jms.ConnectionFactory \
  --ping true --isconnectvalidatereq true \
  jms/myConnectionPool</plain-text-body></structured-macro></li><li><p>Create a connector resource (JNDI-Mapping for connection pool)</p><structured-macro ac:macro-id="e4c5b6ab-e476-4573-bb15-fad7672dcf6c" ac:name="code" ac:schema-version="1"><parameter ac:name="language">bash</parameter><plain-text-body>bin/asadmin create-connector-resource \
  --poolname jms/myConnectionPool \
  jms/myConnectionFactory</plain-text-body></structured-macro></li><li><p>Configure JNDI mapping for a queue</p><structured-macro ac:macro-id="30bcf588-ad7d-4eac-9d95-625de8800f76" ac:name="code" ac:schema-version="1"><parameter ac:name="language">bash</parameter><plain-text-body>bin/asadmin create-admin-object \
	  --raname activemq-rar \
  --restype javax.jms.Queue \
  --property PhysicalName=MY.MAGIC.OUT \
  jms/queue/MY.MAGIC.OUT
</plain-text-body></structured-macro></li><li>Deploy your message driven beans and use the configured jndi names</li></ol></div>

