<div class="wiki-content maincontent"><h3 id="Thevmtransportstartsabrokerbeforemyconfiguredbrokerstarts-Scenario">Scenario</h3>

<p>You are using the <strong>vm:</strong> transport and a broker is auto-started for you so that your configured embedded broker doesn't start.</p>

<h3 id="Thevmtransportstartsabrokerbeforemyconfiguredbrokerstarts-Solution">Solution</h3>

<p>Its most likely a dependency issue; your JMS connection is starting before your embedded broker. So just make sure your embedded broker is started first.</p>

<p>Another cause could be that your use of the <a shape="rect" href="vm-transport-reference.xml">VM Transport</a> defines a broker name of localhost whereas your embedded broker uses a different name; so just be consistent in the naming.</p>

<p>ActiveMQ 5.2 adds the waitForStart='timeout in milliseconds' option to the VM transport which forces the VM transport to wait till the broker is started. Coupled with the "create=false" option, it is possible to ensure that a single embedded broker is auto-started.</p>

<h3 id="Thevmtransportstartsabrokerbeforemyconfiguredbrokerstarts-Seealso">See also</h3>

<ul><li><a shape="rect" href="vm-transport-reference.xml">VM Transport Reference</a></li></ul></div>

