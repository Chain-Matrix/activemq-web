<div class="wiki-content maincontent"><h2 id="KahaPersistence-KahaPersistence">Kaha Persistence</h2>

<p>Kaha Peristence is a storage solution written especially for message persistence and is part of the ActiveMQ project. It's tuned to provide optimal performance for typical message usage patterns, which involves writing/reading and discarding messages that are persisted very quickly.</p>

<p>Data stored in Kaha is appended to data logs - the log files are discarded once there is no longer interest in the data contained in the log.</p>

<h3 id="KahaPersistence-ConfiguringKahaPersistence">Configuring Kaha Persistence</h3>

<p>In the broker XML specify the persistence adaptor to be Kaha e.g.</p>

<p>ActiveMQ 5.0 and above:</p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
 &lt;broker brokerName="broker" persistent="true" useShutdownHook="false"&gt;
    &lt;transportConnectors&gt;
      &lt;transportConnector uri="tcp://localhost:61616"/&gt;
    &lt;/transportConnectors&gt;
    &lt;persistenceAdapter&gt;
      &lt;kahaPersistenceAdapter directory="activemq-data" maxDataFileLength="33554432"/&gt;
    &lt;/persistenceAdapter&gt;
  &lt;/broker&gt;
</pre>
</div></div>


<p>ActiveMQ 4.1 and earlier:</p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="brush: java; gutter: false; theme: Default" style="font-size:12px;">
 &lt;broker brokerName="broker" persistent="true" useShutdownHook="false"&gt;
    &lt;transportConnectors&gt;
      &lt;transportConnector uri="tcp://localhost:61616"/&gt;
    &lt;/transportConnectors&gt;
    &lt;persistenceAdapter&gt;
      &lt;kahaPersistenceAdapter dir="activemq-data" maxDataFileLength="33554432"/&gt;
    &lt;/persistenceAdapter&gt;
  &lt;/broker&gt;
</pre>
</div></div></div>

