<div class="wiki-content maincontent"><h2 id="ConsumerDispatchAsync-Overview">Overview</h2><p>From ActiveMQ v4: the choice of a broker performing synchronous or asynchronous dispatch to a consumer has become more configurable. It is now configured as a default value on the <a shape="rect" href="connection-configuration-uri.xml">connection URI, Connection and ConnectionFactory</a> as well as with being customizable on a per consumer basis via the <a shape="rect" href="destination-options.xml">Destination Options</a> instead previously just being a transport server setting.</p><p>This makes more sense since you want to do asynchronous message delivery to slower consumers, but synchronous message delivery for faster consumers (to avoid the synchronization and context switching costs of adding another SEDA queue). The downside to using synchronous message delivery is that the producer is more likely to block if there is a slow consumer that he is dispatching messages to.</p><p>The default setting is&#160;<strong><code>dispatchAsync=true</code></strong> which is the best setting for high performance. If you want to deal better with slow consumers you will want to enable this setting. If you want better throughput and the chances of having a slow consumer are low, you may want to change this to <strong><code>dispatchAsync=false</code></strong>.</p><h3 id="ConsumerDispatchAsync-ConfiguringAsyncDispatchattheConnectionFactoryLevel">Configuring Async Dispatch at the ConnectionFactory Level</h3><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[((ActiveMQConnectionFactory)connectionFactory).setDispatchAsync(false);
]]></script>
</div></div><h3 id="ConsumerDispatchAsync-ConfiguringDispatchAsyncattheConnectionLevel">Configuring Dispatch Async at the Connection Level</h3><p>Configuring the&#160;<strong><code>dispatchAsync</code></strong> setting at this level overrides the settings at the connection factory level.</p><h3 id="ConsumerDispatchAsync-ConfiguringDispatchAsyncattheConsumerLevelusingtheDestinationURI">Configuring Dispatch Async at the Consumer Level using the Destination URI</h3><p>Configuring the&#160;<strong><code>dispatchAsync</code></strong> using <a shape="rect" href="destination-options.xml">Destination Options</a> overrides the settings at the connection and connection factory level.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[queue = new ActiveMQQueue(&quot;TEST.QUEUE?consumer.dispatchAsync=false&quot;);
consumer = session.createConsumer(queue);
]]></script>
</div></div><h3 id="ConsumerDispatchAsync-DisablingAsyncDispatchonBroker'sTransportConnector">Disabling Async Dispatch on Broker's Transport Connector</h3><p>It is possible to disable async dispatch on a specific transport connector via the&#160;<strong><code>disableAsyncDispatch</code></strong> property. Once disabled for this transport, it cannot be enabled by individual clients.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;transportConnector name=&quot;openwire&quot; uri=&quot;tcp://0.0.0.0:61616&quot; disableAsyncDispatch=&quot;true&quot;/&gt;
]]></script>
</div></div><p>&#160;</p><p>&#160;</p><p>&#160;</p></div>

